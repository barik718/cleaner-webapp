<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Отметка выхода</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h2>Пожалуйста, поставьте отметку о выходе на работу</h2>
<button onclick="mark()">Я вышел</button>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

function mark() {
  const user = tg.initDataUnsafe.user;

  fetch("https://script.google.com/macros/s/AKfycbyknE15cyXHgregLKIPjQADYRk3iuSTbL0dJF7VrYaSwTlte9SQu0OovHzdwMAB1T75Cg/exec", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      id: user.id,
      name: user.first_name,
      username: user.username
    })
  });

  tg.close();
}
</script>

</body>
</html>
